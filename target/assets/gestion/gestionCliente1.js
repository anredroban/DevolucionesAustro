function validateManagementData(){$isValid=true;if($("#number1").is(":visible")){if($("#estadoTel1").val()==""){alert("Debe seleccionar un estado para el numero de Telefono 1");$isValid=false;return}}if($("#number2").is(":visible")){if($("#estadoTel2").val()==""){alert("Debe seleccionar un estado para el numero de Telefono 2");$isValid=false;return}}if($("#number3").is(":visible")){if($("#estadoTel3").val()==""){alert("Debe seleccionar un estado para el numero de Telefono 3");$isValid=false;return}}if($("#number4").is(":visible")){if($("#estadoTel4").val()==""){alert("Debe seleccionar un estado para el numero de Telefono 4");$isValid=false;return}}if($("#number5").is(":visible")){if($("#estadoTel5").val()==""){alert("Debe seleccionar un estado para el numero de Telefono 5");$isValid=false;return}}if($("#number6").is(":visible")){if($("#estadoTel6").val()==""){alert("Debe seleccionar un estado para el numero de Telefono 6");$isValid=false;return}}if($("#number7").is(":visible")){if($("#estadoTel7").val()==""){alert("Debe seleccionar un estado para el numero de Telefono 7");$isValid=false;return}}if($("#number8").is(":visible")){if($("#estadoTel8").val()==""){alert("Debe seleccionar un estado para el numero de Telefono 8");$isValid=false;return}}if($("#number9").is(":visible")){if($("#estadoTel9").val()==""){alert("Debe seleccionar un estado para el numero de Telefono 9");$isValid=false;return}}if($("#number10").is(":visible")){if($("#estadoTel10").val()==""){alert("Debe seleccionar un estado para el numero de Telefono 10");$isValid=false;return}}if($("#status").val()==""){alert("Debe escoger un estado");$isValid=false;return}else{if($("#substatus").val()==""){alert("Debe escoger un subestado");$isValid=false;return}else{if($("#recall").is(":visible")){if($("#agendamiento").val()==""){alert("Campo agendamiento vacio");$isValid=false;return}if($("#recall").val()==""){alert("Debe ingresar una fecha para la rellamada");$isValid=false;return}else{if(calcularDias($("#recall").val())>3){alert("La fecha de rellamada no puede sobrepasar los tres días");$isValid=false;return}}}if($("#subSubStatus").is(":visible")){if($("#subSubStatus").val()==""){alert("Debe escoger un sub subestado");$isValid=false;return}}if($telefonoContactadoDiv.is(":visible")){if($telefonoContactado.val()===""){alert("Ingrese el teléfono al cual pudo contactar al cliente");$isValid=false;return}else{if($telefonoContactado.val().substring(0,1)!=0){alert("El teléfono contactado es incorrecto");$isValid=false;return}else{if(!validarSiNumero($telefonoContactado.val())){alert("El teléfono contactado no es un número válido");$isValid=false;return}else{if($telefonoContactado.val().length==9&&$telefonoContactado.val().trim().substring(0,2)=="09"){alert("Esta ingresando un telefono convencional incorrecto. Verifique!");$isValid=false;return}else{if($telefonoContactado.val().length==10&&$telefonoContactado.val().trim().substring(0,2)!="09"){alert("Esta ingresando un telefono celular incorrecto. Verifique!");$isValid=false;return}}}}}if($("#estadoTelefonoContactado").val()===""){alert("Ingrese el estado del teléfono contactado");$isValid=false;return}}}}if($("#managementData").is(":visible")){if($("#lugarEnvio").val()==""){alert("Campo lugar envío vacio");$isValid=false;return}if($("#divAgencia").is(":visible")){if($("#provinciaAgencia").val()==""){alert("Seleccione la provincia de la agencia");$isValid=false;return}if($("#ciudadAgencia").val()==""){alert("Seleccione la ciudad de la agencia");$isValid=false;return}if($("#motivoDevolucionesGestion").val()==""){alert("Seleccione el motivo de devolución");$isValid=false;return}if($("#telefonoContactoGestion").val()===""){alert("Ingrese el teléfono de contacto");$isValid=false;return}else{if($("#telefonoContactoGestion").val().substring(0,1)!=0){alert("El teléfono de contacto es incorrecto");$isValid=false;return}else{if(!validarSiNumero($("#telefonoContactoGestion").val())){alert("El teléfono de contacto no es un número válido");$isValid=false;return}else{if($("#telefonoContactoGestion").val().length==9&&$("#telefonoContactoGestion").val().trim().substring(0,2)=="09"){alert("Esta ingresando un telefono convencional incorrecto. Verifique!");$isValid=false;return}else{if($("#telefonoContactoGestion").val().length==10&&$("#telefonoContactoGestion").val().trim().substring(0,2)!="09"){alert("Esta ingresando un telefono celular incorrecto. Verifique!");$isValid=false;return}}}}}if($("#celularContactoGestion").val()==""){alert("Campo celular de contacto vacío");$isValid=false;return}else{if($("#celularContactoGestion").val().substring(0,1)!=0){alert("El celular de contacto es incorrecto");$isValid=false;return}else{if(!validarSiNumero($("#celularContactoGestion").val())){alert("El celular de contacto no es un número válido");$isValid=false;return}else{if($("#celularContactoGestion").val().length==10&&$("#celularContactoGestion").val().trim().substring(0,2)!="09"){alert("Esta ingresando un celular incorrecto. Verifique!");$isValid=false;return}}}}if($("#emailGestionAgencia").val()!=""&&!validarEmail($("#emailGestionAgencia").val())){alert("El Email ingresado es incorrecto.");$isValid=false;return}}if($("#divDireccion").is(":visible")){if($("#respuestaTipo").val()==""){alert("Campo respuesta tipo vacio");$isValid=false;return}if($("#provinciaDirecion").val()==""){alert("Seleccione la provincia del domicilio");$isValid=false;return}if($("#ciudadDirecion").val()==""){alert("Seleccione la ciudad del domicilio");$isValid=false;return}if($("#telefonoContactoGestionDir").val()===""){alert("Ingrese el teléfono de contacto");$isValid=false;return}else{if($("#telefonoContactoGestionDir").val().substring(0,1)!=0){alert("El teléfono de contacto es incorrecto");$isValid=false;return}else{if(!validarSiNumero($("#telefonoContactoGestionDir").val())){alert("El teléfono de contacto no es un número válido");$isValid=false;return}}}if($("#celularContactoGestionDir").val()==""){alert("Campo celular de contacto vacío");$isValid=false;return}else{if($("#celularContactoGestionDir").val().substring(0,1)!=0){alert("El celular de contacto es incorrecto");$isValid=false;return}else{if(!validarSiNumero($("#celularContactoGestionDir").val())){alert("El celular de contacto no es un número válido");$isValid=false;return}else{if($("#celularContactoGestionDir").val().length==10&&$("#celularContactoGestionDir").val().trim().substring(0,2)!="09"){alert("Esta ingresando un celular incorrecto. Verifique!");$isValid=false;return}}}}if($("#personaContacto").val()==""){alert("Campo Persona contacto vacío");$isValid=false;return}if($("#divTerceraPersona").is(":visible")){if($("#nombreTerceraPersona").val()==""){alert("Campo nombre tercera persons vacío");$isValid=false;return}if($("#parentescoTerceraPersona").val()==""){alert("Campo parentesco tercera persona vacío");$isValid=false;return}}if($("#horarioEntrega").val()==""){alert("Campo horario de entrega vacío");$isValid=false;return}if($("#callePrincipalEntrega").val()==""){alert("Campo Calle principal vacío");$isValid=false;return}if($("#nomenclaturaEntrega").val()==""){alert("Campo Num. Casa vacío");$isValid=false;return}if($("#calleSecundariaEntrega").val()==""){alert("Campo calle secundaria vacío");$isValid=false;return}if($("#referenciaEntrega").val()==""){alert("Campo referencia vacío");$isValid=false;return}}}if($("#discrepancias").val()==""){alert("Campo discrepancias vacìo");$isValid=false;return}if($("#divDiscrepancias").is(":visible")){if($("#detalleDiscrepancias").val()==""){alert("Campo detalle discrepancias vacío");$isValid=false;return}if($("#divDetalleDiscrepancias").is(":visible")){if($("#detalleOtros").val()==""){alert("Campo detalle otros vacío");$isValid=false;return}}}return $isValid}function init(){esconderCamposEstados();$("#status").val($("#status option:first").val());$("#estadoTelefonoContactado").val($("#status option:first").val());$("#sexo").val($("#sexo option:first").val());$("#estadoCivil").val($("#estadoCivil option:first").val());$("#parentesco").val($("#parentesco option:first").val());$("#provinciaDomicilioGestion").val($("#estadoCivil option:first").val());$("#provinciaTrabajoGestion").val($("#estadoCivil option:first").val());$("#radioPrimerNombre").prop("checked",true);$("#radioSegundoNombre").prop("disabled",true);$("#tipoCliente").val($("#tipoCliente option:first").val());$("#dataIndependiente").hide();$("#dataDependiente").hide();$("#dataJubilado").hide();$("#divDiferenteValor").hide();$("#divEscenarioIdeal").hide();$("#divEscenario12").hide();$("#divEscenario24").hide();$("#divEscenario36").hide();$("#divCuentaNueva").hide();$("#btnAdicional").attr("disabled",true)}function emptySelect(e){var t=document.getElementById(e);var n=document.createElement("option");var r=t.length;while(r>0){r--;t.remove(r)}n.text="-- Seleccione --";n.value="";t.add(n,null)}function fillSelect(e,t){var n=document.getElementById(e);var r=t[0].length;emptySelect(e);if(r>0){for(i=0;i<r;i++){var s=document.createElement("option");s.text=t[1][i];s.value=t[0][i];n.add(s,null)}}return r}function checkIfNumberNoSpace(e,t){if(e==32)return 0;if($.inArray(e,[46,8,9,27,13,110,190])!==-1||e==97&&t.ctrlKey===true||e==99&&t.ctrlKey===true||e==120&&t.ctrlKey===true||e==0){return 1}if(e<48||e>57){return 0}}function soloLetras(e){key=e.keyCode||e.which;tecla=String.fromCharCode(key).toLowerCase();letras=" áéíóúabcdefghijklmnñopqrstuvwxyz";especiales="8-37-39-46";tecla_especial=false;for(var t in especiales){if(key==especiales[t]){tecla_especial=true;break}}if(letras.indexOf(tecla)==-1&&!tecla_especial){return false}}function validarSiNumero(e){$esNumero=true;if(!/^([0-9])*$/.test(e)){$esNumero=false}return $esNumero}function validarEmail(e){var t=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;return t.test(e)?true:false}function validarSiSoloLetras(e){$esSoloTexto=true;$filtro=/^([A-Za-z ])*$/;if(!$filtro.test(e)){$esSoloTexto=false}return $esSoloTexto}function validarVacio(e){$esVacio=true;for(i=0;i<e.length;i++){if(e.charAt(i)==" "){$esVacio=false}}return $esVacio}function calcularEdad(e){var t=new Date;var n=new Date(e);var r=t.getFullYear()-n.getFullYear();var i=t.getMonth()-n.getMonth();if(i<0||i===0&&t.getDate()<n.getDate()){r--}return r}function calcularDias(e){var t=new Date;var n=new Date(e);var r=n.getTime()-t.getTime();var i=Math.round(r/(1e3*60*60*24));return i}function validarFecha(e){var t=e.split("/");var n=t[0];var r=t[1];var i=t[2];var s=new Date(n,r-1,i);if(!s||s.getFullYear()==n&&s.getMonth()==r-1&&s.getDate()==i){return true}else{return false}}function cleanAdicionalData(){$("#cedula").val("");$("#primerNombre").val("");$("#segundoNombre").val("");$("#primerApellido").val("");$("#segundoApellido").val("");$("#radioPrimerNombre").prop("checked",true);$("#radioSegundoNombre").prop("disabled",true);$("#cupoOtorgado").val("");$("#sexo").val($("#sexo option:first").val());$("#parentesco").val($("#parentesco option:first").val());$("#fechaNacimiento").val("");$("#observaciones").val("");$("#estadoCivilAdicional").val($("#estadoCivilAdicional option:first").val());$("#nacionalidadAdicional").val("")}function load_data(e){$.post(baseUrl+"/FuncionesAjax/searchUser",{query:e}).done(function(e){if(e=="null"){}else{alert("ya tienes este usuario en la base de datos con la misma cedula")}})}function esconderCamposEstados(){$("#motivoNoDesea").val($("#motivoNoDesea option:first").val());$("#cobroProteccionFraudes").val($("#cobroProteccionFraudes option:first").val());$("#recallDiv").hide();$("#subSubStatusDiv").hide();$("#managementData").hide();$("#motNoDeseaDiv").hide();$("#tipoAsistenciaDiv").hide();$("#exequial").prop("checked",false);$("#fraudes").prop("checked",false);$("#cobroDiv").hide();$("#agenciaGroup").hide();$("#divDiscrepancias").hide();$("#divDetalleDiscrepancias").hide();$("#divAgencia").hide();$("#divDireccion").hide();$("#divTerceraPersona").hide();$("#lugarEnvio").val($("#lugarEnvio option:first").val());$("#discrepancias").val($("#discrepancias option:first").val());$("#detalleDiscrepancias").val($("#detalleDiscrepancias option:first").val());$("#detalleOtros").val("");$divMotivo.hide()}function limpiarTipoCliente(){$("#nombreNegocio").val("");$("#fechaInicioNegocio").val("");$("#actividadEconomica").val("");$("#ventasHonorariosMensuales").val("");$("#costoVentas").val("");$("#gastosOperativos").val("");$("#situacionLaboral").val($("#situacionLaboral option:first").val());$("#nombreEmpresaGestion").val("");$("#contrato").val($("#contrato option:first").val());$("#cargo").val("");$("#fechaInicioTrabajoActual").val("");$("#sueldo").val("");$("#gastosFamilia").val("")}$(document).ready(function(){$telefonoContactadoDiv=$("#telefonoContactadoDiv");$telefonoContactado=$("#telefonoContactado");$numeroCasaDomicilio=$("#numeroCasaDomicilio");$telefonoContacto=$("#telefonoContacto");$status=$("#status");$subSubStatus=$("#subSubStatus");$divMotivo=$("#divMotivo");init();$status.change(function(){esconderCamposEstados();$telefonoContactado.val("");if($status.val()==""){emptySelect("substatus")}else{$statusId=this.value;if($statusId==1){}$.get(baseUrl+"/FuncionesAjax/getSubStatusByStatus",{id:$statusId},function(e){fillSelect("substatus",e)})}});$("#substatus").change(function(){esconderCamposEstados();if($("#substatus").val()==""){emptySelect("subSubStatus")}else{$subStatusId=this.value;$.get(baseUrl+"/FuncionesAjax/getSubSubStatusBySubStatus",{id:$subStatusId},function(e){if(fillSelect("subSubStatus",e)>0){$("#subSubStatusDiv").show()}else{$("#subSubStatusDiv").hide()}if(e[2]=="Rellamada"){$("#recallDiv").show()}else{$("#recallDiv").hide()}})}});$("#substatus").change(function(){if($("#substatus").val()==3){$("#managementData").show();$("#tipoAsistenciaDiv").show()}if($("#substatus").val()==2){$("#divPDP").show();$("#managementData").hide();$("#tipoAsistenciaDiv").hide()}if($("#substatus").val()==1){$("#divPDP").hide();$("#managementData").show();$("#tipoAsistenciaDiv").hide()}});$("#fraudes").change(function(){$("#cobroProteccionFraudes").val($("#cobroProteccionFraudes option:first").val());if($(this).prop("checked")){$("#cobroDiv").show()}else $("#cobroDiv").hide()});$("#cedula").keyup(function(){if($(this).val().trim().length==10){var e=$(this).val();if(e!=""){load_data(e)}else{load_data()}}});$("#btnGuardarAdicional").click(function(e){if(!validateAdicionalData()){e.preventDefault();return false}$idCliente=$("#idCliente").val().trim();$cedula=$("#cedula").val().trim();$primerNombre=$("#primerNombre").val().trim();$segundoNombre=$("#segundoNombre").val().trim();$primerApellido=$("#primerApellido").val().trim();$segundoApellido=$("#segundoApellido").val().trim();$nombreTarjeta=$("input:radio[name=nombreTarjeta]:checked").val();$cupoOtorgado=$("#cupoOtorgado").val().trim();$sexo=$("#sexo").val().trim();$parentesco=$("#parentesco").val().trim();$fechaNacimiento=$("#fechaNacimiento").val().trim();$estadoCivil=$("#estadoCivilAdicional").val().trim();$nacionalidad=$("#nacionalidadAdicional").val().trim();$.get(baseUrl+"/FuncionesAjax/addAdicionalToList",{idCliente:$idCliente,cedula:$cedula,primerNombre:$primerNombre,segundoNombre:$segundoNombre,primerApellido:$primerApellido,segundoApellido:$segundoApellido,nombreTarjeta:$nombreTarjeta,cupoOtorgado:$cupoOtorgado,sexo:$sexo,parentesco:$parentesco,fechaNacimiento:$fechaNacimiento,estadoCivil:$estadoCivil,nacionalidad:$nacionalidad},function(e){cleanAdicionalData();if(e=="true"){alert("Adicional agregado")}})});$("#segundoNombre").focusout(function(){if($("#segundoNombre").val().trim()!=""){$("#radioSegundoNombre").prop("disabled",false)}else{$("#radioPrimerNombre").prop("checked",true);$("#radioSegundoNombre").prop("disabled",true)}});$("#provinciaDomicilioGestion").change(function(e){emptySelect("ciudadDomicilioGestion");emptySelect("cantonDomicilio");emptySelect("parroquiaDomicilio");if($("#provinciaDomicilioGestion").val()!=""){$idProvincia=this.value;$.get(baseUrl+"/FuncionesAjax/getCiudades",{id:$idProvincia},function(e){fillSelect("ciudadDomicilioGestion",e)});$.get(baseUrl+"/FuncionesAjax/getCantones",{id:$idProvincia},function(e){fillSelect("cantonDomicilio",e)})}});$("#provinciaNacimiento").change(function(e){emptySelect("ciudadNacimiento");if($("#provinciaNacimiento").val()!=""){$idProvincia=this.value;$.get(baseUrl+"/FuncionesAjax/getCiudades",{id:$idProvincia},function(e){fillSelect("ciudadNacimiento",e)})}});$("#provinciaEntrega").change(function(e){emptySelect("ciudadEntrega");if($("#provinciaEntrega").val()!=""){$idProvincia=this.value;$.get(baseUrl+"/FuncionesAjax/getCiudadesEntrega",{id:$idProvincia},function(e){fillSelect("ciudadEntrega",e)})}});$("#ciudadEntrega").change(function(e){emptySelect("oficinaTarjeta");if($("#ciudadEntrega").val()!=""){$idCiudad=this.value;$.get(baseUrl+"/FuncionesAjax/getParroquiasAgencias",{id:$idCiudad},function(e){fillSelect("oficinaTarjeta",e)})}});$("#parroquiaEntrega").change(function(e){emptySelect("oficinaTarjeta");if($("#parroquiaEntrega").val()!=""){$idParroquia=this.value;$.get(baseUrl+"/FuncionesAjax/getAgencias",{id:$idParroquia},function(e){fillSelect("oficinaTarjeta",e)})}});$("#ciudadDirecion").change(function(e){emptySelect("parroquiaDirecion");if($("#ciudadDirecion").val()!=""){$idCanton=this.value;$.get(baseUrl+"/FuncionesAjax/getParroquiasAgencias",{id:$idCanton},function(e){fillSelect("parroquiaDirecion",e)})}});$("#provinciaDirecion").change(function(e){emptySelect("ciudadDirecion");if($("#provinciaDirecion").val()!=""){$idProvincia=this.value;$.get(baseUrl+"/FuncionesAjax/getCiudadesEntrega",{id:$idProvincia},function(e){fillSelect("ciudadDirecion",e)})}});$("#provinciaAgencia").change(function(e){emptySelect("ciudadAgencia");if($("#provinciaAgencia").val()!=""){$idProvincia=this.value;$.get(baseUrl+"/FuncionesAjax/getCiudades",{id:$idProvincia},function(e){fillSelect("ciudadAgencia",e)})}});$("#lugarEnvio").change(function(){$("#divDireccion").hide();$("#divAgencia").hide();$("#divTerceraPersona").hide();$("#telefonoContactoGestion").val("");$("#provinciaAgencia").val($("#provinciaAgencia option:first").val());$("#ciudadAgencia").val($("#ciudadAgencia option:first").val());$("#motivoDevolucionesGestion").val($("#motivoDevolucionesGestion option:first").val());$("#celularContactoGestion").val("");$("#telefonoContactoGestionDir").val("");$("#emailGestion").val("");$("#nombreTerceraPersona").val("");$("#callePrincipalEntrega").val("");$("#nomenclaturaEntrega").val("");$("#calleSecundariaEntrega").val("");$("#referenciaEntrega").val("");$("#respuestaTipo").val($("#respuestaTipo option:first").val());$("#provinciaDirecion").val($("#provinciaDirecion option:first").val());$("#ciudadDirecion").val($("#ciudadDirecion option:first").val());$("#personaContacto").val($("#personaContacto option:first").val());$("#parentescoTerceraPersona").val($("#parentescoTerceraPersona option:first").val());$("#horarioEntrega").val($("#horarioEntrega option:first").val());if($(this).val()=="AGENCIA"){$("#divAgencia").show()}if($(this).val()=="DIRECCION"){$("#divDireccion").show()}});$("#personaContacto").change(function(){$("#divTerceraPersona").hide();if($(this).val()=="TERCERA PERSONA"){$("#divTerceraPersona").show()}else{$("#divTerceraPersona").hide()}});$("#discrepancias").change(function(){$("#divDiscrepancias").hide();$("#detalleDiscrepancias").val($("#detalleDiscrepancias option:first").val());$("#detalleOtros").val("");$("#divDetalleDiscrepancias").hide();if($(this).val()=="SI"){$("#divDiscrepancias").show()}else{$("#divDiscrepancias").hide()}});$("#detalleDiscrepancias").change(function(){$("#divDetalleDiscrepancias").hide();$("#detalleOtros").val("");if($(this).val()=="OTROS..Cual ?"){$("#divDetalleDiscrepancias").show()}else{$("#divDetalleDiscrepancias").hide()}});$("#send").click(function(e){if(!validateManagementData()){e.preventDefault();return false}else{$("#send").hide()}})})